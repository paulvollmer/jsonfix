!function(e){function i(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}var t={};i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)},i.p="",i(i.s=0)}([function(e,i,t){"use strict";function r(){var e=new a(jsonlint),i=e.process(l.getDoc().getValue());i.isValid?(u.getDoc().setValue(i.input),n(i.message,"pass")):!0===i.wasFixed?(u.getDoc().setValue(JSON.stringify(i.result,null,2)),n(i.message,"fixed")):(u.getDoc().setValue(""),n(i.message,"fail")),s(i),o(i)}function n(e,i){var t=document.getElementById("result-message");t.innerHTML=e,t.className=i}function s(e){console.log(e);var i={input:e.input,isValid:e.isValid,wasFixed:e.wasFixed,message:e.message,result:e.result,totalTries:e.totalTries,errorList:e.errorList};document.getElementById("result-data").innerHTML="<pre>"+JSON.stringify(i,null,2)+"</pre>"}function o(e){var i=document.getElementById("result-viz"),t="";t+="<p>Total number of tries: "+e.totalTries+"</p>";for(var r=0;r<e.errorList.length;r++)t+="<div>",t+="<p>",t+="<b>"+(r+1)+". Fix</b>",t+=" expecting: <code>"+e.errorList[r].expecting+"</code>",t+=" got: <code>"+e.errorList[r].got+"</code>",t+="</p>",t+="<pre>"+e.errorList[r].fix+"</pre>",t+="</div>";i.innerHTML=t}var a=t(1),l=void 0,u=void 0;window.onload=function(){l=CodeMirror.fromTextArea(document.getElementById("source"),{lineNumbers:!0,mode:"application/json"}),u=CodeMirror.fromTextArea(document.getElementById("result"),{lineNumbers:!0,mode:"application/json"})},window.jsonfix={update:r}},function(e,i,t){"use strict";function r(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,i){for(var t=0;t<i.length;t++){var r=i[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(i,t,r){return t&&e(i.prototype,t),r&&e(i,r),i}}(),s=t(2),o=t(3),a=function(){function e(i){r(this,e),this.input=null,this.isValid=null,this.wasFixed=null,this.message=null,this.result=null,this.totalTries=0,this.errorList=[],this.jsonlint=i,this.maximumTries=100}return n(e,[{key:"process",value:function(e){this.input=e,this.isValid=null,this.wasFixed=null,this.message=null,this.result=null,this.totalTries=0,this.errorList=[];try{var i=JSON.parse(e);this.isValid=!0,this.wasFixed=!1,this.message="JSON is valid!",this.result=i}catch(i){this.isValid=!1,""===e?(this.wasFixed=!0,this.message="empty source detected...",this.result={},this.totalTries=1):this.tryFix(this.normalize(e))}return this}},{key:"normalize",value:function(e){return e.replace("{","{\n").replace("}","\n}").replace('",','",\n')}},{key:"tryFix",value:function(e){if(++this.totalTries===this.maximumTries)return this.wasFixed=!1,this;try{var i=this.jsonlint.parse(e);this.wasFixed=!0,this.message="input was successfully fixed!",this.result=i}catch(i){var t=(new s).parse(i.message);switch(this.errorList.push(t),t.description){case"Parse error":t.message=null,t.fix=null,this.tryFixParseError(e,t);break;default:this.result=null,this.message='cannot fix the error type "'+t.description+'"... sorry'}}}},{key:"tryFixParseError",value:function(i,t){switch(t.got){case"EOF'":var r=this.tryFixParseErrorEOF(i,t);this.tryFix(r);break;case"undefined'":var n=this.tryFixParseErrorUndefined(i,t);this.tryFix(n);break;case"}'":var s=this.tryFixParseErrorCurlyBracket(i,t);this.tryFix(s);break;case":'":var o=this.tryFixParseErrorColon(i,t);this.tryFix(o);break;case"STRING'":var a=this.tryFixParseErrorSTRING(i,t);this.tryFix(a);break;case"NUMBER'":var l=this.tryFixParseErrorNUMBER(i,t);this.tryFix(l);break;default:throw e.wasFixed=!1,e.message='cannot fix got="'+t.got+'" expecting="'+t.expecting+'"',new Error(e.message)}}},{key:"tryFixParseErrorEOF",value:function(e,i){var t=e[e.length-1];return"}"===t&&" ]"===t||("{"===e[0]&&(e+="}",i.message="missing } at end of source",i.fix=e),"["===e[0]&&(e+="]",i.message="missing ] at end of source",i.fix=e)),e}},{key:"tryFixParseErrorUndefined",value:function(e,i){var t=e.split("\n"),r=t[i.line-1].split(",");return t[i.line-1]=r[0]+'",',t.join("\n")}},{key:"tryFixParseErrorCurlyBracket",value:function(e,i){var t=e.split("\n");if("'STRING'"===i.expecting){var r=t[i.line-1].length;","===t[i.line-1][r-1]&&(t[i.line-1]=t[i.line-1].replace(",",""));var n=t.join("\n");return i.fix=n,n}return"'EOF', '}', ':', ',', ']'"===i.expecting?e:"',', ']'"===i.expecting?(t[i.line-1]+="]",t.join("\n")):void 0}},{key:"tryFixParseErrorColon",value:function(e,i){if("'EOF', '}', ',', ']'"===i.expecting){var t=e[0],r=e[e.length-1];if("{"!==t&&"}"===r){i.message="missing { at the beginning of the json";var n="{"+e;return i.fix=n,n}if("["!==t&&"]"===r){i.message="missing [ at the beginning of the json";var s="["+e;return i.fix=s,s}}i.expecting}},{key:"tryFixParseErrorSTRING",value:function(i,t){var r=i.split("\n");if("'EOF', '}', ',', ']'"===t.expecting){t.message="missing comma";var n=o.missingComma(r[t.line-1]);t.fix=n,r[t.line-1]=n}else if("'EOF', '}', ':', ',', ']'"===t.expecting){if(-1===r[t.line-1].indexOf(":")){t.message="missing colon";var s=o.missingColon(r[t.line-1]);t.fix=s,r[t.line-1]=s}if(-1===r[t.line-1].indexOf(",")){var a=o.missingComma(r[t.line-1]);t.fix=a,r[t.line-1]=a}}else e.message="cannot fix this ugly bug... sorry!",e.wasFixed=!1;return r.join("\n")}},{key:"tryFixParseErrorNUMBER",value:function(e,i){}}]),e}();e.exports=a},function(e,i,t){"use strict";function r(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,i){for(var t=0;t<i.length;t++){var r=i[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(i,t,r){return t&&e(i.prototype,t),r&&e(i,r),i}}(),s=function(){function e(){r(this,e),this.description="",this.line="",this.code="",this.expecting="",this.got=""}return n(e,[{key:"parse",value:function(e){var i=e.split("\n");return this.description=i[0].split(" on line ")[0],this.line=i[0].split("on line ")[1].split(":")[0],this.code=i[1],this.expecting=i[3].split("Expecting ")[1].split(", got ")[0],this.got=i[3].split(", got '")[1],this}}]),e}();e.exports=s},function(e,i,t){"use strict";i.missingColon=function(e){if(e&&""!==e){var i=e.split('"'),t="";if(3===i.length)t=i[0]+'"'+i[1]+'":';else{if(5!==i.length)throw new Error("cannot set colon");t=i[0]+'"'+i[1]+'":'+i[2]+'"'+i[3]+'"'+i[4]}return t}return""},i.missingComma=function(e){return e&&""!==e?e+",":""}}]);
//# sourceMappingURL=app.build.js.map